% test implementation L_BR primitives.

% se avessi il tipo dato relazioni dove identifico le due coppie, potrei provare ad
%  implementare dom R ad esempio, che data una relazione R trova tutti gli x tali che (x, y) \in R.

% relation is implemented as a picat map.



%/* 
% Retrives the domain of {@code R}.
%*/
dom(R) = R.keys().

%/* 
% Retrives the domain of {@code R}.
%*/
ran(R) = R.values().

%/* 
% Retrives the domain domain restriction of A on R.
%
% @param :map R
% @param :set A
% @return :map { (x, y) | (x, y) \in R \and x \in A }
%*/
drestr(R, A) = Res => 
    Res = new_map(),
    foreach ( K in R.keys() )
        if A.has_key(K) then
            V = R.get(K),
            Res.put(K, V)
        end
    end.

main =>
    R = new_map(),
    R.put(a, 1),
    R.put(b, 2),
    R.put(c, 3),

    A = new_set(),
    A.put(a), 
    A.put(b),
    
    print_rel(R),

    drest_test(R, A).

print_rel(R) => 
    println(R).
    %foreach ( X in R )
    %    println(X)
    %end.

drest_test(R, A) =>
    println("------ drest_test"),
    Res = drestr(R, A),
    print_rel(Res).
    